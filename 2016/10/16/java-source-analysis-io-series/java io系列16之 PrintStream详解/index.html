<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>java io系列16之 PrintStream详解 | Jeeson&#39;s Blog | Write the code. Change the world.</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Java源码分析,Java IO系列">
    <meta name="description" content="本章介绍PrintStream以及 它与DataOutputStream的区别。我们先对PrintStream有个大致认识，然后再深入学习它的源码，最后通过示例加深对它的了解。   目录1. PrintStream 介绍2. PrintStream 源码分析(基于jdk1.7.40)3. PrintStream和DataOutputStream异同点4. 示例代码      1. PrintSt">
<meta name="keywords" content="Java源码分析,Java IO系列">
<meta property="og:type" content="article">
<meta property="og:title" content="java io系列16之 PrintStream详解">
<meta property="og:url" content="https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/index.html">
<meta property="og:site_name" content="Jeeson&#39;s Blog">
<meta property="og:description" content="本章介绍PrintStream以及 它与DataOutputStream的区别。我们先对PrintStream有个大致认识，然后再深入学习它的源码，最后通过示例加深对它的了解。   目录1. PrintStream 介绍2. PrintStream 源码分析(基于jdk1.7.40)3. PrintStream和DataOutputStream异同点4. 示例代码      1. PrintSt">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-06-27T09:39:57.941Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="java io系列16之 PrintStream详解">
<meta name="twitter:description" content="本章介绍PrintStream以及 它与DataOutputStream的区别。我们先对PrintStream有个大致认识，然后再深入学习它的源码，最后通过示例加深对它的了解。   目录1. PrintStream 介绍2. PrintStream 源码分析(基于jdk1.7.40)3. PrintStream和DataOutputStream异同点4. 示例代码      1. PrintSt">
    
        <link rel="alternate" type="application/atom+xml" title="Jeeson&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/head.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Jeeson</h5>
          <a href="mailto:smuwjs@163.com" title="smuwjs@163.com" class="mail">smuwjs@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/smuwjs" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">java io系列16之 PrintStream详解</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">java io系列16之 PrintStream详解</h1>
        <h5 class="subtitle">
            
                <time datetime="2016-10-15T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2016-10-16
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/source-analysis/">source analysis</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#1-PrintStream-介绍"><span class="post-toc-number">1.</span> <span class="post-toc-text">1. PrintStream 介绍</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#2-PrintStream-源码分析-基于jdk1-7-40"><span class="post-toc-number">2.</span> <span class="post-toc-text">2. PrintStream 源码分析(基于jdk1.7.40)</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#3-PrintStream和DataOutputStream异同点"><span class="post-toc-number">3.</span> <span class="post-toc-text">3. PrintStream和DataOutputStream异同点</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#4-示例代码"><span class="post-toc-number">4.</span> <span class="post-toc-text">4. 示例代码</span></a></li></ol>
        </nav>
    </aside>
    
<article id="post-java-source-analysis-io-series/java io系列16之 PrintStream详解"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">java io系列16之 PrintStream详解</h1>
        <div class="post-meta">
            <time class="post-time" title="2016-10-16 00:00:00" datetime="2016-10-15T16:00:00.000Z"  itemprop="datePublished">2016-10-16</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/source-analysis/">source analysis</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <blockquote>
<p>本章介绍PrintStream以及 它与DataOutputStream的区别。我们先对PrintStream有个大致认识，然后再深入学习它的源码，最后通过示例加深对它的了解。</p>
</blockquote>
<blockquote>
<p><strong>目录</strong><br><a href="#anchor1">1. PrintStream 介绍</a><br><a href="#anchor2">2. PrintStream 源码分析(基于jdk1.7.40)</a><br><a href="#anchor3">3. PrintStream和DataOutputStream异同点</a><br><a href="#anchor4">4. 示例代码</a>   </p>
</blockquote>
<p><a name="anchor1"></a></p>
<h1 id="1-PrintStream-介绍"><a href="#1-PrintStream-介绍" class="headerlink" title="1. PrintStream 介绍"></a>1. PrintStream 介绍</h1><p>PrintStream 是打印输出流，它继承于FilterOutputStream。</p>
<p>PrintStream 是用来装饰其它输出流。它能为其他输出流添加了功能，使它们能够方便地打印各种数据值表示形式。<br>与其他输出流不同，PrintStream 永远不会抛出 IOException；它产生的IOException会被自身的函数所捕获并设置错误标记， 用户可以通过 checkError() 返回错误标记，从而查看PrintStream内部是否产生了IOException。<br>另外，PrintStream 提供了自动flush 和 字符集设置功能。所谓自动flush，就是往PrintStream写入的数据会立刻调用flush()函数。</p>
<p><strong>PrintStream 函数列表</strong></p>
<pre><code>// 构造函数
// 将“输出流out”作为PrintStream的输出流，不会自动flush，并且采用默认字符集
// 所谓“自动flush”，就是每次执行print(), println(), write()函数，都会调用flush()函数；
// 而“不自动flush”，则需要我们手动调用flush()接口。
PrintStream(OutputStream out)
// 将“输出流out”作为PrintStream的输出流，自动flush，并且采用默认字符集。
PrintStream(OutputStream out, boolean autoFlush)
// 将“输出流out”作为PrintStream的输出流，自动flush，采用charsetName字符集。
PrintStream(OutputStream out, boolean autoFlush, String charsetName)
// 创建file对应的FileOutputStream，然后将该FileOutputStream作为PrintStream的输出流，不自动flush，采用默认字符集。
PrintStream(File file)
// 创建file对应的FileOutputStream，然后将该FileOutputStream作为PrintStream的输出流，不自动flush，采用charsetName字符集。
PrintStream(File file, String charsetName)
// 创建fileName对应的FileOutputStream，然后将该FileOutputStream作为PrintStream的输出流，不自动flush，采用默认字符集。
PrintStream(String fileName)
// 创建fileName对应的FileOutputStream，然后将该FileOutputStream作为PrintStream的输出流，不自动flush，采用charsetName字符集。
PrintStream(String fileName, String charsetName)

// 将“字符c”追加到“PrintStream输出流中”
PrintStream     append(char c)
// 将“字符序列从start(包括)到end(不包括)的全部字符”追加到“PrintStream输出流中”
PrintStream     append(CharSequence charSequence, int start, int end)
// 将“字符序列的全部字符”追加到“PrintStream输出流中”
PrintStream     append(CharSequence charSequence)
// flush“PrintStream输出流缓冲中的数据”，并检查错误
boolean     checkError()
// 关闭“PrintStream输出流”
synchronized void     close()
// flush“PrintStream输出流缓冲中的数据”。
// 例如，PrintStream装饰的是FileOutputStream，则调用flush时会将数据写入到文件中
synchronized void     flush()
// 根据“Locale值(区域属性)”来格式化数据
PrintStream     format(Locale l, String format, Object... args)
// 根据“默认的Locale值(区域属性)”来格式化数据
PrintStream     format(String format, Object... args)
// 将“float数据f对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
void     print(float f)
// 将“double数据d对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
void     print(double d)
// 将“字符串数据str”写入到“PrintStream输出流”中，print实际调用的是write函数
synchronized void     print(String str)
// 将“对象o对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
void     print(Object o)
// 将“字符c对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
void     print(char c)
// 将“字符数组chars对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
void     print(char[] chars)
// 将“long型数据l对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
void     print(long l)
// 将“int数据i对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
void     print(int i)
// 将“boolean数据b对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
void     print(boolean b)
// 将“数据args”根据“Locale值(区域属性)”按照format格式化，并写入到“PrintStream输出流”中
PrintStream     printf(Locale l, String format, Object... args)
// 将“数据args”根据“默认Locale值(区域属性)”按照format格式化，并写入到“PrintStream输出流”中
PrintStream     printf(String format, Object... args)
// 将“换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
void     println()
// 将“float数据对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
void     println(float f)
// 将“int数据对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
void     println(int i)
// 将“long数据对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
void     println(long l)
// 将“对象o对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
void     println(Object o)
// 将“字符数组chars对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
void     println(char[] chars)
// 将“字符串str+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
synchronized void     println(String str)
// 将“字符c对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
void     println(char c)
// 将“double数据对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
void     println(double d)
// 将“boolean数据对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
void     println(boolean b)
// 将数据oneByte写入到“PrintStream输出流”中。oneByte虽然是int类型，但实际只会写入一个字节
synchronized void     write(int oneByte)
// 将“buffer中从offset开始的length个字节”写入到“PrintStream输出流”中。
void     write(byte[] buffer, int offset, int length)
</code></pre><p>注意：<strong>print()和println()都是将其中参数转换成字符串之后，再写入到输入流。</strong></p>
<p>例如，</p>
<pre><code>print(0x61); 
</code></pre><p>等价于</p>
<pre><code>write(String.valueOf(0x61));
</code></pre><p>上面语句是将字符串”97”写入到输出流。0x61对应十进制数是97。</p>
<pre><code>write(0x61)
</code></pre><p>上面语句是将字符’a’写入到输出流。因为0x61对应的ASCII码的字母’a’。</p>
<p>查看下面的代码，我们能对这些函数有更清晰的认识！</p>
<p><a name="anchor2"></a></p>
<h1 id="2-PrintStream-源码分析-基于jdk1-7-40"><a href="#2-PrintStream-源码分析-基于jdk1-7-40" class="headerlink" title="2. PrintStream 源码分析(基于jdk1.7.40)"></a>2. PrintStream 源码分析(基于jdk1.7.40)</h1><pre><code>package java.io;

import java.util.Formatter;
import java.util.Locale;
import java.nio.charset.Charset;
import java.nio.charset.IllegalCharsetNameException;
import java.nio.charset.UnsupportedCharsetException;

public class PrintStream extends FilterOutputStream
    implements Appendable, Closeable
{

    // 自动flush
    // 所谓“自动flush”，就是每次执行print(), println(), write()函数，都会调用flush()函数；
    // 而“不自动flush”，则需要我们手动调用flush()接口。
    private final boolean autoFlush;
    // PrintStream是否右产生异常。当PrintStream有异常产生时，会被本身捕获，并设置trouble为true
    private boolean trouble = false;
    // 用于格式化的对象
    private Formatter formatter;

    // BufferedWriter对象，用于实现“PrintStream支持字符集”。
    // 因为PrintStream是OutputStream的子类，所以它本身不支持字符串；
    // 但是BufferedWriter支持字符集，因此可以通过OutputStreamWriter创建PrintStream对应的BufferedWriter对象，从而支持字符集。
    private BufferedWriter textOut;
    private OutputStreamWriter charOut;

    private static &lt;T&gt; T requireNonNull(T obj, String message) {
        if (obj == null)
            throw new NullPointerException(message);
        return obj;
    }

    // 返回csn对应的字符集对象
    private static Charset toCharset(String csn)
        throws UnsupportedEncodingException
    {
        requireNonNull(csn, &quot;charsetName&quot;);
        try {
            return Charset.forName(csn);
        } catch (IllegalCharsetNameException|UnsupportedCharsetException unused) {
            // UnsupportedEncodingException should be thrown
            throw new UnsupportedEncodingException(csn);
        }
    }

    // 将“输出流out”作为PrintStream的输出流，autoFlush的flush模式，并且采用默认字符集。
    private PrintStream(boolean autoFlush, OutputStream out) {
        super(out);
        this.autoFlush = autoFlush;
        this.charOut = new OutputStreamWriter(this);
        this.textOut = new BufferedWriter(charOut);
    }

    // 将“输出流out”作为PrintStream的输出流，自动flush，采用charsetName字符集。
    private PrintStream(boolean autoFlush, OutputStream out, Charset charset) {
        super(out);
        this.autoFlush = autoFlush;
        this.charOut = new OutputStreamWriter(this, charset);
        this.textOut = new BufferedWriter(charOut);
    }

    // 将“输出流out”作为PrintStream的输出流，自动flush，采用charsetName字符集。
    private PrintStream(boolean autoFlush, Charset charset, OutputStream out)
        throws UnsupportedEncodingException
    {
        this(autoFlush, out, charset);
    }

    // 将“输出流out”作为PrintStream的输出流，不会自动flush，并且采用默认字符集
    public PrintStream(OutputStream out) {
        this(out, false);
    }

    // 将“输出流out”作为PrintStream的输出流，自动flush，并且采用默认字符集。
    public PrintStream(OutputStream out, boolean autoFlush) {
        this(autoFlush, requireNonNull(out, &quot;Null output stream&quot;));
    }

    // 将“输出流out”作为PrintStream的输出流，自动flush，采用charsetName字符集。
    public PrintStream(OutputStream out, boolean autoFlush, String encoding)
        throws UnsupportedEncodingException
    {
        this(autoFlush,
             requireNonNull(out, &quot;Null output stream&quot;),
             toCharset(encoding));
    }

    // 创建fileName对应的FileOutputStream，然后将该FileOutputStream作为PrintStream的输出流，不自动flush，采用默认字符集。
    public PrintStream(String fileName) throws FileNotFoundException {
        this(false, new FileOutputStream(fileName));
    }

    // 创建fileName对应的FileOutputStream，然后将该FileOutputStream作为PrintStream的输出流，不自动flush，采用charsetName字符集。
    public PrintStream(String fileName, String csn)
        throws FileNotFoundException, UnsupportedEncodingException
    {
        // ensure charset is checked before the file is opened
        this(false, toCharset(csn), new FileOutputStream(fileName));
    }

    // 创建file对应的FileOutputStream，然后将该FileOutputStream作为PrintStream的输出流，不自动flush，采用默认字符集。
    public PrintStream(File file) throws FileNotFoundException {
        this(false, new FileOutputStream(file));
    }

    // 创建file对应的FileOutputStream，然后将该FileOutputStream作为PrintStream的输出流，不自动flush，采用csn字符集。
    public PrintStream(File file, String csn)
        throws FileNotFoundException, UnsupportedEncodingException
    {
        // ensure charset is checked before the file is opened
        this(false, toCharset(csn), new FileOutputStream(file));
    }

    private void ensureOpen() throws IOException {
        if (out == null)
            throw new IOException(&quot;Stream closed&quot;);
    }

    // flush“PrintStream输出流缓冲中的数据”。
    // 例如，PrintStream装饰的是FileOutputStream，则调用flush时会将数据写入到文件中
    public void flush() {
        synchronized (this) {
            try {
                ensureOpen();
                out.flush();
            }
            catch (IOException x) {
                trouble = true;
            }
        }
    }

    private boolean closing = false; /* To avoid recursive closing */

    // 关闭PrintStream
    public void close() {
        synchronized (this) {
            if (! closing) {
                closing = true;
                try {
                    textOut.close();
                    out.close();
                }
                catch (IOException x) {
                    trouble = true;
                }
                textOut = null;
                charOut = null;
                out = null;
            }
        }
    }

    // flush“PrintStream输出流缓冲中的数据”，并检查错误
    public boolean checkError() {
        if (out != null)
            flush();
        if (out instanceof java.io.PrintStream) {
            PrintStream ps = (PrintStream) out;
            return ps.checkError();
        }
        return trouble;
    }

    protected void setError() {
        trouble = true;
    }

    protected void clearError() {
        trouble = false;
    }

    // 将数据b写入到“PrintStream输出流”中。b虽然是int类型，但实际只会写入一个字节
    public void write(int b) {
        try {
            synchronized (this) {
                ensureOpen();
                out.write(b);
                if ((b == &apos;\n&apos;) &amp;&amp; autoFlush)
                    out.flush();
            }
        }
        catch (InterruptedIOException x) {
            Thread.currentThread().interrupt();
        }
        catch (IOException x) {
            trouble = true;
        }
    }

    // 将“buf中从off开始的length个字节”写入到“PrintStream输出流”中。
    public void write(byte buf[], int off, int len) {
        try {
            synchronized (this) {
                ensureOpen();
                out.write(buf, off, len);
                if (autoFlush)
                    out.flush();
            }
        }
        catch (InterruptedIOException x) {
            Thread.currentThread().interrupt();
        }
        catch (IOException x) {
            trouble = true;
        }
    }

    // 将“buf中的全部数据”写入到“PrintStream输出流”中。
    private void write(char buf[]) {
        try {
            synchronized (this) {
                ensureOpen();
                textOut.write(buf);
                textOut.flushBuffer();
                charOut.flushBuffer();
                if (autoFlush) {
                    for (int i = 0; i &lt; buf.length; i++)
                        if (buf[i] == &apos;\n&apos;)
                            out.flush();
                }
            }
        }
        catch (InterruptedIOException x) {
            Thread.currentThread().interrupt();
        }
        catch (IOException x) {
            trouble = true;
        }
    }

    // 将“字符串s”写入到“PrintStream输出流”中。
    private void write(String s) {
        try {
            synchronized (this) {
                ensureOpen();
                textOut.write(s);
                textOut.flushBuffer();
                charOut.flushBuffer();
                if (autoFlush &amp;&amp; (s.indexOf(&apos;\n&apos;) &gt;= 0))
                    out.flush();
            }
        }
        catch (InterruptedIOException x) {
            Thread.currentThread().interrupt();
        }
        catch (IOException x) {
            trouble = true;
        }
    }

    // 将“换行符”写入到“PrintStream输出流”中。
    private void newLine() {
        try {
            synchronized (this) {
                ensureOpen();
                textOut.newLine();
                textOut.flushBuffer();
                charOut.flushBuffer();
                if (autoFlush)
                    out.flush();
            }
        }
        catch (InterruptedIOException x) {
            Thread.currentThread().interrupt();
        }
        catch (IOException x) {
            trouble = true;
        }
    }

    // 将“boolean数据对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
    public void print(boolean b) {
        write(b ? &quot;true&quot; : &quot;false&quot;);
    }

    // 将“字符c对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
    public void print(char c) {
        write(String.valueOf(c));
    }

    // 将“int数据i对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
    public void print(int i) {
        write(String.valueOf(i));
    }

    // 将“long型数据l对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
    public void print(long l) {
        write(String.valueOf(l));
    }

    // 将“float数据f对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
    public void print(float f) {
        write(String.valueOf(f));
    }

    // 将“double数据d对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
    public void print(double d) {
        write(String.valueOf(d));
    }

    // 将“字符数组s”写入到“PrintStream输出流”中，print实际调用的是write函数
    public void print(char s[]) {
        write(s);
    }

    // 将“字符串数据s”写入到“PrintStream输出流”中，print实际调用的是write函数
    public void print(String s) {
        if (s == null) {
            s = &quot;null&quot;;
        }
        write(s);
    }

    // 将“对象obj对应的字符串”写入到“PrintStream输出流”中，print实际调用的是write函数
    public void print(Object obj) {
        write(String.valueOf(obj));
    }


    // 将“换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
    public void println() {
        newLine();
    }

    // 将“boolean数据对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
    public void println(boolean x) {
        synchronized (this) {
            print(x);
            newLine();
        }
    }

    // 将“字符x对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
    public void println(char x) {
        synchronized (this) {
            print(x);
            newLine();
        }
    }

    // 将“int数据对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
    public void println(int x) {
        synchronized (this) {
            print(x);
            newLine();
        }
    }

    // 将“long数据对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
    public void println(long x) {
        synchronized (this) {
            print(x);
            newLine();
        }
    }

    // 将“float数据对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
    public void println(float x) {
        synchronized (this) {
            print(x);
            newLine();
        }
    }

    // 将“double数据对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
    public void println(double x) {
        synchronized (this) {
            print(x);
            newLine();
        }
    }

    // 将“字符数组x+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
    public void println(char x[]) {
        synchronized (this) {
            print(x);
            newLine();
        }
    }

    // 将“字符串x+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
    public void println(String x) {
        synchronized (this) {
            print(x);
            newLine();
        }
    }

    // 将“对象o对应的字符串+换行符”写入到“PrintStream输出流”中，println实际调用的是write函数
    public void println(Object x) {
        String s = String.valueOf(x);
        synchronized (this) {
            print(s);
            newLine();
        }
    }

    // 将“数据args”根据“默认Locale值(区域属性)”按照format格式化，并写入到“PrintStream输出流”中
    public PrintStream printf(String format, Object ... args) {
        return format(format, args);
    }

    // 将“数据args”根据“Locale值(区域属性)”按照format格式化，并写入到“PrintStream输出流”中
    public PrintStream printf(Locale l, String format, Object ... args) {
        return format(l, format, args);
    }

    // 根据“默认的Locale值(区域属性)”来格式化数据
    public PrintStream format(String format, Object ... args) {
        try {
            synchronized (this) {
                ensureOpen();
                if ((formatter == null)
                    || (formatter.locale() != Locale.getDefault()))
                    formatter = new Formatter((Appendable) this);
                formatter.format(Locale.getDefault(), format, args);
            }
        } catch (InterruptedIOException x) {
            Thread.currentThread().interrupt();
        } catch (IOException x) {
            trouble = true;
        }
        return this;
    }

    // 根据“Locale值(区域属性)”来格式化数据
    public PrintStream format(Locale l, String format, Object ... args) {
        try {
            synchronized (this) {
                ensureOpen();
                if ((formatter == null)
                    || (formatter.locale() != l))
                    formatter = new Formatter(this, l);
                formatter.format(l, format, args);
            }
        } catch (InterruptedIOException x) {
            Thread.currentThread().interrupt();
        } catch (IOException x) {
            trouble = true;
        }
        return this;
    }

    // 将“字符序列的全部字符”追加到“PrintStream输出流中”
    public PrintStream append(CharSequence csq) {
        if (csq == null)
            print(&quot;null&quot;);
        else
            print(csq.toString());
        return this;
    }

    // 将“字符序列从start(包括)到end(不包括)的全部字符”追加到“PrintStream输出流中”
    public PrintStream append(CharSequence csq, int start, int end) {
        CharSequence cs = (csq == null ? &quot;null&quot; : csq);
        write(cs.subSequence(start, end).toString());
        return this;
    }

    // 将“字符c”追加到“PrintStream输出流中”
    public PrintStream append(char c) {
        print(c);
        return this;
    }
}
</code></pre><p>说明：PrintStream的源码比较简单，请上文的注释进行阅读。若有不明白的地方，建议先看看后面的PrintStream使用示例；待搞清它的作用和用法之后，再来阅读源码。</p>
<p><a name="anchor3"></a></p>
<h1 id="3-PrintStream和DataOutputStream异同点"><a href="#3-PrintStream和DataOutputStream异同点" class="headerlink" title="3. PrintStream和DataOutputStream异同点"></a>3. PrintStream和DataOutputStream异同点</h1><p><strong>相同点</strong></p>
<p>都是继承与FileOutputStream，用于包装其它输出流。</p>
<p><strong>不同点</strong></p>
<p>(01) PrintStream和DataOutputStream 都可以将数据格式化输出；但它们在“输出字符串”时的编码不同。</p>
<blockquote>
<p>PrintStream是输出时采用的是用户指定的编码(创建PrintStream时指定的)，若没有指定，则采用系统默认的字符编码。而DataOutputStream则采用的是UTF-8。<br>  关于UTF-8的字符编码可以参考“字符编码(ASCII，Unicode和UTF-8) 和 大小端”<br>  关于DataOutputStream的更多内容，可以参考“java io系列15之 DataOutputStream(数据输出流)的认知、源码和示例”</p>
</blockquote>
<p>(02) 它们的写入数据时的异常处理机制不同。</p>
<blockquote>
<p> DataOutputStream在通过write()向“输出流”中写入数据时，若产生IOException，会抛出。<br>  而PrintStream在通过write()向“输出流”中写入数据时，若产生IOException，则会在write()中进行捕获处理；并设置trouble标记(用于表示产生了异常)为true。用户可以通过checkError()返回trouble值，从而检查输出流中是否产生了异常。</p>
</blockquote>
<p>(03) 构造函数不同</p>
<blockquote>
<p> DataOutputStream的构造函数只有一个：DataOutputStream(OutputStream out)。即它只支持以输出流out作为“DataOutputStream的输出流”。<br>   而PrintStream的构造函数有许多：和DataOutputStream一样，支持以输出流out作为“PrintStream输出流”的构造函数；还支持以“File对象”或者“String类型的文件名对象”的构造函数。<br>   而且，在PrintStream的构造函数中，能“指定字符集”和“是否支持自动flush()操作”。</p>
</blockquote>
<p>(04) 目的不同</p>
<blockquote>
<p>  DataOutputStream的作用是装饰其它的输出流，它和DataInputStream配合使用：允许应用程序以与机器无关的方式从底层输入流中读写java数据类型。<br>   而PrintStream的作用虽然也是装饰其他输出流，但是它的目的不是以与机器无关的方式从底层读写java数据类型；而是为其它输出流提供打印各种数据值表示形式，使其它输出流能方便的通过print(), println()或printf()等输出各种格式的数据。</p>
</blockquote>
<p><a name="anchor4"></a></p>
<h1 id="4-示例代码"><a href="#4-示例代码" class="headerlink" title="4. 示例代码"></a>4. 示例代码</h1><p>关于PrintStream中API的详细用法，参考示例代码(PrintStreamTest.java)：</p>
<pre><code>import java.io.PrintStream;
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;

/**
 * PrintStream 的示例程序
 *
 * @author skywang
 */
public class PrintStreamTest {

    public static void main(String[] args) {

        // 下面3个函数的作用都是一样：都是将字母“abcde”写入到文件“file.txt”中。
        // 任选一个执行即可！
        testPrintStreamConstrutor1() ;
        //testPrintStreamConstrutor2() ;
        //testPrintStreamConstrutor3() ;

        // 测试write(), print(), println(), printf()等接口。
        testPrintStreamAPIS() ;
    }

    /**
     * PrintStream(OutputStream out) 的测试函数
     *
     * 函数的作用，就是将字母“abcde”写入到文件“file.txt”中
     */
    private static void testPrintStreamConstrutor1() {
        // 0x61对应ASCII码的字母&apos;a&apos;，0x62对应ASCII码的字母&apos;b&apos;, ...
        final byte[] arr={0x61, 0x62, 0x63, 0x64, 0x65 }; // abced
        try {
            // 创建文件“file.txt”的File对象
            File file = new File(&quot;file.txt&quot;);
            // 创建文件对应FileOutputStream
            PrintStream out = new PrintStream(
                    new FileOutputStream(file));
            // 将“字节数组arr”全部写入到输出流中
            out.write(arr);
            // 关闭输出流
            out.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * PrintStream(File file) 的测试函数
     *
     * 函数的作用，就是将字母“abcde”写入到文件“file.txt”中
     */
    private static void testPrintStreamConstrutor2() {
        final byte[] arr={0x61, 0x62, 0x63, 0x64, 0x65 };
        try {
            File file = new File(&quot;file.txt&quot;);
            PrintStream out = new PrintStream(file);
            out.write(arr);
            out.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * PrintStream(String fileName) 的测试函数
     *
     * 函数的作用，就是将字母“abcde”写入到文件“file.txt”中
     */
    private static void testPrintStreamConstrutor3() {
        final byte[] arr={0x61, 0x62, 0x63, 0x64, 0x65 };
        try {
            PrintStream out = new PrintStream(&quot;file.txt&quot;);
            out.write(arr);
            out.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    /**
     * 测试write(), print(), println(), printf()等接口。
     */
    private static void testPrintStreamAPIS() {
        // 0x61对应ASCII码的字母&apos;a&apos;，0x62对应ASCII码的字母&apos;b&apos;, ...
        final byte[] arr={0x61, 0x62, 0x63, 0x64, 0x65 }; // abced
        try {
            // 创建文件对应FileOutputStream
            PrintStream out = new PrintStream(&quot;other.txt&quot;);

            // 将字符串“hello PrintStream”+回车符，写入到输出流中
            out.println(&quot;hello PrintStream&quot;);
            // 将0x41写入到输出流中
            // 0x41对应ASCII码的字母&apos;A&apos;，也就是写入字符&apos;A&apos;
            out.write(0x41);
            // 将字符串&quot;65&quot;写入到输出流中。
            // out.print(0x41); 等价于 out.write(String.valueOf(0x41));
            out.print(0x41);
            // 将字符&apos;B&apos;追加到输出流中
            out.append(&apos;B&apos;);

            // 将&quot;CDE is 5&quot; + 回车  写入到输出流中
            String str = &quot;CDE&quot;;
            int num = 5;
            out.printf(&quot;%s is %d\n&quot;, str, num);

            out.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
</code></pre><p>运行上面的代码，会在源码所在目录生成两个文件“file.txt”和“other.txt”。</p>
<p>file.txt的内容如下：</p>
<pre><code>abcde
</code></pre><p>other.txt的内容如下：</p>
<pre><code>hello PrintStream
A65BCDE is 5
</code></pre>
        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-06-27T09:39:57.941Z" itemprop="dateUpdated">2018-06-27 17:39:57</time>
</span><br>


        
        本文固定链接：<a href="/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/" target="_blank" rel="external">https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/</a>
        
    </div>
    <footer>
        <a href="https://smuwjs.github.io">
            <img src="/img/head.png" alt="Jeeson">
            Jeeson
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java-IO系列/">Java IO系列</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java源码分析/">Java源码分析</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/&title=《java io系列16之 PrintStream详解》 — Jeeson's Blog&pic=https://smuwjs.github.io/img/head.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/&title=《java io系列16之 PrintStream详解》 — Jeeson's Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《java io系列16之 PrintStream详解》 — Jeeson's Blog&url=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/&via=https://smuwjs.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2016/10/17/java-source-analysis-io-series/java io系列17之 System.out.println详解/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">java io系列17之 System.out.println详解</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2016/10/15/java-source-analysis-io-series/java io系列15之 DataOutputStream详解/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">java io系列15之 DataOutputStream详解</h4>
      </a>
    </div>
  
</nav>



    

<div class="comments" id="comments">
    <div class="ds-thread" data-thread-key="java-source-analysis-io-series/java io系列16之 PrintStream详解" data-title="java io系列16之 PrintStream详解" data-url="https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/"></div>
</div>
<script>
lazyScripts.push('//cdn.bootcss.com/marked/0.3.6/marked.min.js');

var duoshuoQuery = {short_name:'smuwjs', theme: 'none'};
lazyScripts.push('//unpkg.com/hexo-theme-material-indigo@latest/js/embed.min.js');


</script>
















</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p>
            <span>Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span>
            <span>Jeeson &copy; 2015 - 2018</span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/&title=《java io系列16之 PrintStream详解》 — Jeeson's Blog&pic=https://smuwjs.github.io/img/head.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/&title=《java io系列16之 PrintStream详解》 — Jeeson's Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《java io系列16之 PrintStream详解》 — Jeeson's Blog&url=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/&via=https://smuwjs.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://smuwjs.github.io/2016/10/16/java-source-analysis-io-series/java io系列16之 PrintStream详解/" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };



</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
